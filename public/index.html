<!doctype html>
<html>
  <head>
    <title>Zilch</title>
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script>
      $(() => {
        var socket = io();
        socket.on('status', (msg) => {
          $('#status').val(msg);
        });
        socket.on('newDice', (dice) => {
          console.log('new dice');
          console.log(dice);
          for(let i = 0; i < dice.length; i++) {
            let die = dice[i];
            const checkBox = document.getElementById(`dice${i}`);
            const label = document.getElementById(`label${i}`);
            checkBox.disabled = !die.available;
            label.innerHTML = die.value;
          }
        });

        $('#rollDice').click(() => {
          let dice = [];
          for(let i = 0; i < 6; i++) {
            const checkBox = document.getElementById(`dice${i}`);
            dice[i] = checkBox.checked;
          }
          socket.emit('rollDice', dice);
          socket.emit('status', 'Submitted roll');
        });

        $('#cashDice').click(() => {
          let dice = [];
          for(let i = 0; i < 6; i++) {
            const checkBox = document.getElementById(`dice${i}`);
            dice[i] = checkBox.checked;
          }
          socket.emit('cashDice', dice);
          socket.emit('status', 'Cashed in');
        });

      });
    </script>
  </head>
  <body>
    Status: 
    <input disabled id="status" value="initial state" />
    <br />
    <br />
    <input type="checkbox" id="dice0" name="dice0" disabled />
    <label for="dice0" id="label0">Waiting to roll..</label>
    <br />
    <input type="checkbox" id="dice1" name="dice1" disabled />
    <label for="dice1" id="label1">Waiting to roll..</label>
    <br />
    <input type="checkbox" id="dice2" name="dice2" disabled />
    <label for="dice2" id="label2">Waiting to roll..</label>
    <br />
    <input type="checkbox" id="dice3" name="dice3" disabled />
    <label for="dice3" id="label3">Waiting to roll..</label>
    <br />
    <input type="checkbox" id="dice4" name="dice4" disabled />
    <label for="dice4" id="label4">Waiting to roll..</label>
    <br />
    <input type="checkbox" id="dice5" name="dice5" disabled />
    <label for="dice5" id="label5">Waiting to roll..</label>
    <br />
    <br />
    <button id="rollDice">Submit dice selection & roll dice</button>
    <br />
    <button id="cashDice">Submit dice selection & cash in dice</button>
    <br />
    <br />
    <label for="currentScore">Current turn score: </label>
    <input type="text" disabled id="currentScore" value="0" />
    <br />
    <label for="p1Score">Player 1 score: </label>
    <input type="text" disabled id="p1Score" value="0" />
    <br />
    <label for="p2Score">Player 2 score: </label>
    <input type="text" disabled id="p2Score" value="0" />
  </body>
</html>